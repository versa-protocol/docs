---
title: "Sending a Receipt"
---

# Sending a Receipt

The sender is a protocol client typically operated by a merchant. The sender's responsibilities include:

1. Register the transaction.
2. Encrypt the receipt.
3. Send the encrypted receipt.

## Register the transaction

```bash
curl --request POST \
  --url 'https://registry.versa.org/register' \
  --header 'Authorization: Basic <CLIENT_ID:CLIENT_SECRET>' \
  --header 'Content-Type: application/json' \
  --data '{
    "receipt_hash": 175932758392347,
    "protocol_version": "0.1.0",
    "email_domain": "acme.com"
  }'
```

Example response:

```json
{
  "key": [...],
  "receivers": [
    { "address": "https://bank.com/receipt" },
    { "address": "https://expenseapp.com/receipt" }
  ]
}
```

## Encrypt the receipt

Receipts are encrypted with the AES 256 encryption algorithm, using the registry-provided key and a unique nonce generated for each receiver.

## Send the encrypted receipt

The nonce and encrypted data are sent to each receiver address, at which point they have the opportunity to check out the key from the registry, and decrypt the envelope.

```json
{
  "receipt_hash": 175932758392347,
  "nonce": [...],
  "encrypted": [...]
}
```
