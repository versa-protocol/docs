---
title: "Receipt Schema"
---

# Receipt Schema

Itemized receipts are the core data model of Versa. They include both “header” information — the merchant name, merchant logo, total purchase amount, purchase date, etc. — as well as “line item” details — the quantity, description, and cost of each item purchased.

Technically, the Versa receipt object is an “invoice” combined with an associated payment. In certain AP / AR scenarios, the invoice and the payment are decoupled, however in most Versa cases, the invoice and payment confirmation come through together, composing the complete receipt in a single payload.

Versa receipts are composed of four sections:

1. [**Header**](#header): Top-level fields, e.g. merchant details, receipt total, purchase date.
2. [**Itemization**](#itemization): Description, quantity, unit cost, and total for each line item. Type-specific templates describe special receipt types, e.g. flight, e-commerce purchase, subscription.
3. [**Actions**](#actions): Merchant-defined links, pivoting off the purchase. For example: ‘Contact Support,’ ‘Buy Again,’ ‘Manage Subscription.’
4. [**Payment**](#payment): Payment status of the receipt.

## Wrapper

Receipts are wrapped in an object that includes the schema version. The overall Versa receipt structure looks like this:

```json
{
  "version": "0.1.0",
  "header": { ... },
  "itemization": { ... },
  "actions": [ ... ],
  "payment": { ... }
}
```

| Field         | Type              | Description                                                       |
| ------------- | ----------------- | ----------------------------------------------------------------- |
| `version`     | `string`          | Version of the receipt schema; useful for validating the receipt. |
| `header`      | `object`          | Receipt [header](#header).                                        |
| `itemization` | `object`          | Receipt [itemization](#itemization) object.                       |
| `actions`     | `nullable array`  | List of [actions](#actions).                                      |
| `payment`     | `nullable object` | [Payment](#payment) details.                                      |

Below we cover each of these four sections in detail.

## Header

The receipt header is the 10,000 foot view of the transaction, describing the “who,” “when,” and “where” (the “what” is covered in the itemization section). An example receipt header:

```json
"header": {
  "receipt_id": "7b928a1d-eb2b-406f-bed3-74ba7dacbe98",
  "currency": "USD",
  "amount": 6332,
  "subtotal": 5928,
  "created_at": 1713295619,
  "mcc": 3234,
  "third_party": {
    "first_party_relation": "point_of_sale",
    "make_primary": true,
    "merchant": {
      "id": "merchant_5e2a9954-b7e3-4150-bd51-ba2d3d12442b",
      "name": "Widget Co.",
      "brand_color": "EF4D48",
      "logo": "https://static.platform.co/merchants/widget-co.png",
      "website": ""
    }
  },
  "customer": null,
  "location": null,
}
```

| Field         | Type              | Description                                                                                                         |
| ------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------- |
| `receipt_id`  | `string`          | Unique identifier for the receipt.                                                                                  |
| `currency`    | `string`          | An [ISO 4217](https://www.iso.org/iso-4217-currency-codes.html) currency code, e.g. `USD`.                          |
| `amount`      | `integer`         | Receipt total amount. This amount is in the receipt currency and in the [smallest currency unit](#currency-values). |
| `subtotal`    | `integer`         | Receipt subtotal (before taxes, fees, tip, and discounts).                                                          |
| `created_at`  | `integer`         | Time at which the object was created. Measured in seconds since the Unix epoch.                                     |
| `mcc`         | `nullable string` | Merchant Category Code. This value should match the value on the card network.                                      |
| `third_party` | `nullable object` | [Third party](#third-party) involved in the transaction, where applicable.                                          |
| `customer`    | `nullable object` | [Customer](#customer) involved in the transaction, where applicable.                                                |
| `location`    | `nullable object` | [Place](#place) object for brick-and-mortar in-person purchases.                                                    |

<details>
<summary>Third Party Object</summary>
<article>

### Third Party

Use the optional third party object in cases where the sender is a platform / broker. For example, if a coffee shop uses Square to process sales, the ‘sending merchant’ would be Square and the ‘third party merchant’ would be the coffee shop. The `make_primary` flag specifies whether the sending merchant or the third party merchant should get top billing on the receipt.

| Field                  | Type      | Description                                                                                         |
| ---------------------- | --------- | --------------------------------------------------------------------------------------------------- |
| `first_party_relation` | `enum`    | One of `bnpl`, `delivery_service`, `marketplace`, `payment_processor`, `platform`, `point_of_sale`. |
| `make_primary`         | `boolean` | Determines whether the merchant or third party gets top billing on the receipt.                     |
| `merchant`             | `object`  | A [merchant](#merchant) object representing the third party.                                        |

</article>
</details>

<details>
<summary>Customer Object</summary>
<article>

### Customer

Used in cases where the merchant has a profile for the customer. Can be left null i.e. for guest checkout flows.

| Field     | Type              | Description                    |
| --------- | ----------------- | ------------------------------ |
| `name`    | `string`          |                                |
| `email`   | `nullable string` |                                |
| `address` | `nullable object` | An [address](#address) object. |
| `phone`   | `nullable string` |                                |

</article>
</details>

## Itemization

The Itemization section describes the goods and services that compose the purchase. Based on the type of purchase, the object conforms to one of seven templates: [General](#general), [Car Rental](#car-rental), [E-commerce](#e-commerce), [Flight](#flight), [Lodging](#lodging), [Subscription](#subscription), or [Transit Route](#transit-route). Exactly one itemization template must be non-null. When in doubt, use the 'general' template.

```json
"itemization": {
  "general": { ... },
  "lodging": null,
  "ecommerce": null,
  "car_rental": null,
  "transit_route": null,
  "subscription": null,
  "flight": null
}
```

<details>
<summary>General Object</summary>
<article>

### General

| Field                     | Type             | Description                                                                                                                                               |
| ------------------------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `line_items`              | `array`          | An array of generic [item](#item) objects.                                                                                                                |
| `invoice_level_discounts` | `nullable array` | Array of [discounts](#discount) applied at the top (invoice) level. These are independent of line item discounts, which are added at the line item level. |

</article>
</details>

<details>
<summary>Car Rental Object</summary>
<article>

### Car Rental

> [!NOTE]
> This needs to be updated, pulling in line-item info

```JSON
"car_rental": {
  "rental_time": 1713196492,
  "return_time": 1713415500,
  "rental_location": { ... },
  "return_location": { ... },
  "vehicle_desscription": "Polestar 2",
  "driver_name": "Henry Ford",
  "odometer_reading_in": 100,
  "odometer_reading_out": 210,
  "metadata": null,
  "invoice_level_discounts": null
}
```

| Field                     | Type               | Description                                                                                                                                               |
| ------------------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `rental_time`             | `integer`          | Rental time. Measured in seconds since the Unix epoch.                                                                                                    |
| `return_time`             | `integer`          | Return time. Measured in seconds since the Unix epoch.                                                                                                    |
| `rental_location`         | `object`           | A [place](#place) describing the rental location.                                                                                                         |
| `return_location`         | `object`           | A [place](#place) describing the return location.                                                                                                         |
| `vehicle_desscription`    | `string`           | Make and model of vehicle.                                                                                                                                |
| `driver_name`             | `nullable string`  |                                                                                                                                                           |
| `odometer_reading_in`     | `nullable integer` |                                                                                                                                                           |
| `odometer_reading_out`    | `nullable integer` |                                                                                                                                                           |
| `metadata`                | `nullable array`   | Array of [metadata](#metadata) objects, for any additional info.                                                                                          |
| `invoice_level_discounts` | `nullable array`   | Array of [discounts](#discount) applied at the top (invoice) level. These are independent of line item discounts, which are added at the line item level. |

</article>
</details>

<details>
<summary>Flight Object</summary>
<article>

### Flight

> [!NOTE]
> The specific schema will be described in a future update.

</article>
</details>

<details>
<summary>Lodging Object</summary>
<article>

### Lodging

```JSON
lodging: {
  "check_in": 1713196492,
  "check_out": 1713473361,
  "location": { ... },
  "items": [ ... ],
  "room": "806",
  "guests": "Sue Shmoe",
  "metadata": null,
  "invoice_level_discounts": null
}
```

| Field                     | Type              | Description                                                                                                                                               |
| ------------------------- | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `check_in`                | `int`             | Check-in date. Measured in seconds since the Unix epoch.                                                                                                  |
| `check_out`               | `int`             | Check-out date. Measured in seconds since the Unix epoch.                                                                                                 |
| `location`                | `object`          | A [place](#place) object describing the hotel / lodging.                                                                                                  |
| `itmes`                   | `array`           | An array of generic [item](#item) objects. This includes the room rate, as well as incidentals / full folio.                                              |
| `room`                    | `nullable string` | Room number.                                                                                                                                              |
| `guests`                  | `nullable string` |                                                                                                                                                           |
| `metadata`                | `nullable array`  | Array of [metadata](#metadata) objects, for any additional info.                                                                                          |
| `invoice_level_discounts` | `nullable array`  | Array of [discounts](#discount) applied at the top (invoice) level. These are independent of line item discounts, which are added at the line item level. |

</article>
</details>

<details>
<summary>Transit Route Object</summary>
<article>

### Transit Route

A route, typically used by rideshare / taxi services.

```JSON
"transit_route": {
  "departure_address": {
    "street_address": "273 Sesame St",
    "city": "Brooklyn",
    "region": "NY",
    "country": "US",
    "postal_code": "11205",
    "lat": 40.68266,
    "lon": -73.94237,
  },
  "arrival_address": {
    "street_address": "141 Broadway",
    "city": "Brooklyn",
    "region": "NY",
    "country": "US",
    "postal_code": "11205",
    "lat": 40.69954,
    "lon": -73.97064,
  },
  "departure_time": 1713196492,
  "arrival_time": 1713197752,
  "polyline": "syhwFxzhbMrFtdAmpAhOlGzmAi%5CdEaGEDgEoAEMfK",
  "taxes": null,
  "metadata": null,
  "invoice_level_discounts": null,
  "tip": null
}
```

| Field                     | Type               | Description                                                                                                                                               |
| ------------------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `departure_address`       | `object`           | The origin [address](#address) object.                                                                                                                    |
| `arrival_address`         | `object`           | The destination [address](#address) object.                                                                                                               |
| `departure_time`          | `integer`          | Departure time. Measured in seconds since the Unix epoch.                                                                                                 |
| `arrival_time`            | `integer`          | Arrival time. Measured in seconds since the Unix epoch.                                                                                                   |
| `polyline`                | `nullable string`  | An [encoded polyline](https://developers.google.com/maps/documentation/utilities/polylinealgorithm) of the route.                                         |
| `taxes`                   | `nullable array`   | Array of [tax](#tax) objects.                                                                                                                             |
| `invoice_level_discounts` | `nullable array`   | Array of [discounts](#discount) applied at the top (invoice) level. These are independent of line item discounts, which are added at the line item level. |
| `metadata`                | `nullable array`   | Array of key/value [metadata pairs](#metadata).                                                                                                           |
| `tip`                     | `nullable integer` | The tip amount, if applicable, in the [smallest currency unit](#currency-values).                                                                         |

</article>
</details>

<details>
<summary>Subscription Object</summary>
<article>

### Subscription

For SaaS bills, phone bills, etc.

> [!NOTE]
> At least one subscription item within your subscription array must be type `recurring`.

```JSON
"subscription": {
  "subscription_items": [{
    "type": "recurring",
    "description": "Pro monthly plan",
    "total": 1000,
    "interval": "month",
    "interval_count": 1,
    "current_period_start": 1679609767,
    "current_period_end": 1682288167,
    "quantity": 10,
    "unit_cost": 875,
    "taxes": null,
    "metadata": null,
    "discounts": null
  }],
  "invoice_level_discounts": null
}
```

| Field                     | Type             | Description                                                                                                                                               |
| ------------------------- | ---------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `subscription_items`      | `array`          | An array of [subscription item](#subscription-item) objects.                                                                                              |
| `invoice_level_discounts` | `nullable array` | Array of [discounts](#discount) applied at the top (invoice) level. These are independent of line item discounts, which are added at the line item level. |

#### Subscription Item

| Field                  | Type               | Description                                                                                                                                                         |
| ---------------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `type`                 | `enum`             | One of `one_time` or `recurring`. If `recurring` add interval and period fields.                                                                                    |
| `description`          | `string`           | Description of the good / service.                                                                                                                                  |
| `total`                | `integer`          | Total for the line item (typically `quantity` × `unit_cost` - `discounts` + `taxes`).                                                                               |
| `interval`             | `nullable enum`    | On of `day`, `week`, `month` or `year`.                                                                                                                             |
| `interval_count`       | `nullable integer` | The number of intervals (specified in the interval attribute) between subscription billings. For example, interval=month and interval_count=3 bills every 3 months. |
| `current_period_start` | `nullable integer` | Start of the current period of the subscription. Measured in seconds since the Unix epoch.                                                                          |
| `current_period_end`   | `nullable integer` | End of the current period.                                                                                                                                          |
| `quantity`             | `nullable float`   | Quantity of items.                                                                                                                                                  |
| `unit_cost`            | `nullable integer` | Cost of the good / service in the [smallest currency unit](#currency-values).                                                                                       |
| `taxes`                | `nullable array`   | Array of [tax](#tax) objects.                                                                                                                                       |
| `metadata`             | `nullable array`   | Array of key/value [metadata pairs](#metadata), e.g. SKU.                                                                                                           |
| `discounts`            | `nullable array`   | Array of [discount](#discount) objects.                                                                                                                             |

</article>
</details>

<details>
<summary>E-commerce Object</summary>
<article>

### E-commerce

> [!NOTE]
> The specific schema will be described in a future update.

</article>
</details>

## Actions

Merchants have the option to provide useful next actions in the Actions section. An action is typically a deep link to a page within the merchant’s website. For example 'Buy Again' might deep link to a pre-filled shopping cart. There is a limit of three actions per receipt.

```JSON
"actions": [
  {
    "name": "Emergency Roadside Assistance",
    "url": "https://yourco.com/support/be1e1b57-8fe9-4729-8b7d-f9a4690bb2cd",
  },
  {
    "name": "Rebook",
    "url": "https://yourco.com/buy/ad058b82-d0dd-4534-a915-d448df098167"
  }
]
```

| Field  | Type     | Description                       |
| ------ | -------- | --------------------------------- |
| `name` | `string` | Label that appears on the button. |
| `url`  | `string` | Action deep link.                 |

## Payment

```JSON
"payment": {
  "paid_at": 1679609767,
  "type": "card",
  "card_payment": {
    "last_four": 7806,
    "network": "mastercard",
    }
    "ach_payment": null
  }
}
```

| Field          | Type              | Description                               |
| -------------- | ----------------- | ----------------------------------------- |
| `paid_at`      | `int`             | Measured in seconds since the Unix epoch. |
| `type`         | `enum`            | One of `card` or `ach`.                   |
| `card_payment` | `nullable object` | [Card payment](#card-payment) object.     |
| `ach_payment`  | `nullable object` | [ACH payment](#ach-payment) object.       |

<details>
<summary>Card Payment Object</summary>
<article>

### Card Payment

| Field       | Type            | Description                                                                                   |
| ----------- | --------------- | --------------------------------------------------------------------------------------------- |
| `last_four` | `string`        | The last four digits of the card number.                                                      |
| `network`   | `nullable enum` | One of `amex`, `diners`, `discover`, `eftpos_au`, `jcb`, `mastercard`, `unionpay`, or `visa`. |

</article>
</details>

<details>
<summary>ACH Payment Object</summary>
<article>

### ACH Payment

| Field            | Type     | Description         |
| ---------------- | -------- | ------------------- |
| `routing_number` | `string` | ACH routing number. |

</article>
</details>

## Primitives

Foundational objects used in a variety of locations within the receipt schema.

<details>
<summary>Merchant Primitive</summary>
<article>

### Merchant

A merchant profile.

> [!TIP]
> The merchant object is used to describe both a sending merchant and a third party merchant. In the former case, the merchant object is expanded implicitly via the Versa Registry, whereas in the latter case, the merchant object is explicitly encoded into the receipt, via the header `third_party` object.

```JSON
"merchant": {
  "name": "Platform Co.",
  "brand_color": "f0C14B",
  "logo": "https://static.platform.co/image_url.png",
  "website": "platform.co"
}
```

| Field         | Type              | Description                                                        |
| ------------- | ----------------- | ------------------------------------------------------------------ |
| `name`        | `string`          | Merchant name.                                                     |
| `brand_color` | `nullable string` | Hex color.                                                         |
| `logo`        | `nullable string` | Logo image url, in a square aspect ratio. Recommmend size 400x400. |
| `website`     | `nullable string` | Merchant’s primary website url.                                    |

</article>
</details>

<details>
<summary>Place Primitive</summary>
<article>

### Place

Describes a brick-and-mortar location.

| Field             | Type              | Description                                                                                                            |
| ----------------- | ----------------- | ---------------------------------------------------------------------------------------------------------------------- |
| `name`            | `nullable string` | Place name.                                                                                                            |
| `address`         | `nullable object` | An [address](#address) object.                                                                                         |
| `phone`           | `nullable string` |                                                                                                                        |
| `url`             | `nullable string` | URL for specific place, e.g. chain.com/store-id.                                                                       |
| `google_place_id` | `nullable string` | Mapping to the [Google Places database](https://developers.google.com/maps/documentation/places/web-service/place-id). |
| `image`           | `nullable string` | Image representing the place.                                                                                          |

</article>
</details>

<details>
<summary>Address Primitive</summary>
<article>

### Address

| Field            | Type              | Description                       |
| ---------------- | ----------------- | --------------------------------- |
| `street_address` | `nullable string` |                                   |
| `city`           | `nullable string` |                                   |
| `region`         | `nullable string` | Two letter region code.           |
| `country`        | `string`          | Two letter ISO 3166 country code. |
| `postal_code`    | `nullable string` |                                   |
| `lat`            | `nullable int`    |                                   |
| `lon`            | `nullable int`    |                                   |

</article>
</details>

<details>
<summary>Item Primitive</summary>
<article>

### Item

A generic line item.

```json
{
  "description": "Blue Cheese Crumbles",
  "total": 1780,
  "quantity": 10,
  "unit_cost": 178,
  "unit": null,
  "taxes": [
    {
      "amount": 432,
      "rate": 0.0875,
      "name": "GST"
    }
  ],
  "metadata": [{ "key": "SKU", "value": "524959" }],
  "product_image": null,
  "group": null,
  "url": null,
  "discounts": null
}
```

| Field           | Type               | Description                                                                                                                  |
| --------------- | ------------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| `description`   | `string`           | Description of the good / service.                                                                                           |
| `total`         | `integer`          | Total for the line item (typically `quantity` × `unit_cost` - `discounts` + `taxes`).                                        |
| `quantity`      | `nullable float`   | Quantity of items.                                                                                                           |
| `unit_cost`     | `nullable integer` | Cost of the good / service in the [smallest currency unit](#currency-values).                                                |
| `unit`          | `nullable string`  | Field describing the unit type, typically for weight or volume -based values, e.g. 'kg' or 'gallons'. Leave null for 'each'. |
| `taxes`         | `nullable array`   | Array of [tax](#tax) objects.                                                                                                |
| `metadata`      | `nullable array`   | Array of key/value [metadata pairs](#metadata), e.g. SKU.                                                                    |
| `product_image` | `nullable string`  | Product image url, square aspect ratio.                                                                                      |
| `group`         | `nullable string`  | Grouping of line items.                                                                                                      |
| `url`           | `nullable string`  | URL to product page.                                                                                                         |
| `discounts`     | `nullable array`   | Array of [discount](#discount) objects.                                                                                      |

</article>
</details>

<details>
<summary>Metadata Primitive</summary>
<article>

### Metadata

Ue line item metadata to track things like SKU, Size, Color, UNSPSC Code, etc.

| Field   | Type     | Description                                                                                   |
| ------- | -------- | --------------------------------------------------------------------------------------------- |
| `key`   | `string` | The type of metadata, e.g. 'Size', 'Brand', 'Product Condition', 'Special Instructions', etc. |
| `value` | `string` | The corresponding value.                                                                      |

</article>
</details>

<details>
<summary>Tax Primitive</summary>
<article>

### Tax

Also to be used for tolls, fees, surcharges, and other adjustments.

| Field    | Type             | Description                                                       |
| -------- | ---------------- | ----------------------------------------------------------------- |
| `amount` | `int`            | The total tax, in the [smallest currency unit](#currency-values). |
| `rate`   | `nullable float` | The tax rate, e.g. 0.05 for 5%.                                   |
| `name`   | `string`         | E.g. 'VAT' or 'GST'.                                              |

</article>
</details>

<details>
<summary>Discount Primitive</summary>
<article>

### Discount

| Field    | Type             | Description                                                            |
| -------- | ---------------- | ---------------------------------------------------------------------- |
| `amount` | `int`            | The total discount, in the [smallest currency unit](#currency-values). |
| `name`   | `string`         | The name of the discount.                                              |
| `type`   | `enum`           | One of `fixed` or `percentage`.                                        |
| `rate`   | `nullable float` | The discount rate, e.g. 0.1 for 10%. Null for fixed discount.          |

</article>
</details>

## Definitions & Formatting

### Currency Values

All API requests expect amounts to be provided in a currency’s smallest unit. For example, to represent 10 USD, provide an amount value of 1000 (that is, 1000 cents). For zero-decimal currencies, still provide amounts as an integer but without multiplying by 100. For example, to represent ¥500, provide an amount value of 500.

### Images

Images must be hosted at public URLs. The images are likely to be indexed by the receiver. For best results, no image dimension should be less than 400px, or greater than 2,000px.
