---
title: "Receipt Object"
---

# Receipt Object

Itemized receipts are the core data model of Versa. They include both “header” information — the merchant name, merchant logo, total purchase amount, purchase date, etc. — as well as “line item” details — the quantity, description, and cost of each item purchased.

Versa receipts are composed of six sections:

1. [**Header**](#header): Top-level fields, e.g. merchant details, receipt total, purchase date.
2. [**Type Block**](#type-block): Type-specific objects describing the purchased goods and services. E.g. check-in and check-out information for a hotel stay, route and ticket information for a flight. Note: this section is only present for special receipt types, and is otherwise empty.
3. [**Line Items**](#line-items): Description, quantity, unit cost, and total for each line item.
4. [**Roll-up**](#roll-up): Taxes, fees, tip, discounts.
5. [**Actions**](#actions): Merchant-defined links, pivoting off the purchase. For example: ‘Contact Support,’ ‘Buy Again,’ ‘Manage Subscription.’
6. [**Payment**](#payment): Payment status of the receipt.

## Wrapper

Receipts are wrapped in an object that includes the sender reference and schema version.

When the receiver decrypts the receipt object via the Versa Registry, the Versa Registry will expand the `sender_id` into a full sender profile. This ensures that the receiver always has a consistent, up-to-date profile for the sending merchant. The overall Versa receipt structure looks like this:

```json
{
  "sender_id": "merchant_113fd137-3f9f-40fc-b60d-a8a30a415d9e",
  "schema_version": 1,
  "header": { ... },
  "type_block": { ... },
  "line_items": [ ... ],
  "roll_up": { ... },
  "actions": { ... },
  "payment": { ... }
}
```

| Field            | Type      | Description                                                                                                     |
| ---------------- | --------- | --------------------------------------------------------------------------------------------------------------- |
| `sender_id`      | `string`  | A reference to the sending merchant. The receiver will expand this id into a full [merchant](merchant) profile. |
| `schema_version` | `integer` | Version of the receipt schema; useful for validating the receipt.                                               |

The rest of the receipt is composed of the six objects described above: `header`, `type_block`, `line_items`, `roll_up`, `actions`, and `payment`. Below we cover each of these six sections in detail.

## Header

The receipt header is the 10,000 foot view of the transaction, describing the total amount of the purchase, the date, etc. An example receipt header:

```json
"header": {
  "receipt_id": "7b928a1d-eb2b-406f-bed3-74ba7dacbe98",
  "currency": "USD",
  "amount": 6332,
  "subtotal": 5928,
  "date_time": 1713295619,
  "mcc": 234,
  "third_party": {
    "first_party_relation": "point_of_sale",
    "make_primary": true,
    "merchant": {
      "id": "merchant_5e2a9954-b7e3-4150-bd51-ba2d3d12442b",
      "name": "Widget Co.",
      "brand_color": "EF4D48",
      "logo": "https://static.platform.co/merchants/widget-co.png",
      "website": ""
    }
  }
}
```

| Field         | Type               | Description                                                                                                         |
| ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------- |
| `receipt_id`  | `string`           | Unique identifier for the receipt.                                                                                  |
| `currency`    | `string`           | An [ISO 4217](https://www.iso.org/iso-4217-currency-codes.html) currency code, e.g. `USD`.                          |
| `amount`      | `integer`          | Receipt total amount. This amount is in the receipt currency and in the [smallest currency unit](#currency-values). |
| `subtotal`    | `integer`          | Receipt subtotal (before taxes, fees, and tip).                                                                     |
| `date_time`   | `integer`          | Time at which the object was created. Measured in seconds since the Unix epoch.                                     |
| `mcc`         | `nullable integer` | Merchant Category Code. This value should match the value on the card network.                                      |
| `third_party` | `nullable object`  | [Third party](#third-party) involved in the transaction, where applicable.                                          |

<details>
<summary>Third Party Object</summary>
<article>

### Third Party

Use the optional third party object in cases where the sender is a platform. For example, if a coffee shop uses Square to process sales, the ‘sending merchant’ would be Square and the ‘third party merchant’ would be the coffee shop. The `make_primary` flag specifies whether the sending merchant or the third party merchant should get top billing on the receipt.

| Field                  | Type      | Description                                                                                         |
| ---------------------- | --------- | --------------------------------------------------------------------------------------------------- |
| `first_party_relation` | `enum`    | One of `bnpl`, `delivery_service`, `marketplace`, `payment_processor`, `platform`, `point_of_sale`. |
| `make_primary`         | `boolean` | Determines whether the merchant or third party gets top billing on the receipt.                     |
| `merchant`             | `string`  | A [merchant](#merchant) object representing the third party.                                        |

</article>
</details>

## Type Block

The Type Block section consists of a series of templates specific to different receipt types. Versa covers the following types: [Car Rental](#car-rental), [Flight](#flight), [Location](#location), [Lodging](#lodging), [Transit Route](#transit-route), [Subscription](#subscription), [Shipment](#shipment).

> [!TIP]
> A receipt may have zero, one, or multiple types. For instance, a delivery from a Home Depot location could have a `shipment` object and a `location` object. However, some objects are mutually exclusive. For example, you wouldn't have a `location` and a `lodging` object on the same receipt, because the `lodging` object contains a place.

```JSON
"type_block": {
  "car_rental": null,
  "flight": null,
  "location": null,
  "lodging": null,
  "transit_route": null,
  "subscription": null,
  "shipment": null,
}
```

<details>
<summary>Car Rental Object</summary>
<article>

### Car Rental

```JSON
"car_rental": {
  "rental_time": 1713196492,
  "return_time": 1713415500,
  "rental_location": { ... },
  "return_location": { ... },
  "vehicle_desscription": "Polestar 2",
  "driver_name": "Henry Ford",
  "odometer_reading_in": 100,
  "odometer_reading_out": 210
}
```

| Field                  | Type               | Description                                            |
| ---------------------- | ------------------ | ------------------------------------------------------ |
| `rental_time`          | `integer`          | Rental time. Measured in seconds since the Unix epoch. |
| `return_time`          | `integer`          | Return time. Measured in seconds since the Unix epoch. |
| `rental_location`      | `object`           | A [place](#place) describing the rental location.      |
| `return_location`      | `object`           | A [place](#place) describing the return location.      |
| `vehicle_desscription` | `string`           | Make and model of vehicle.                             |
| `driver_name`          | `nullable string`  |                                                        |
| `odometer_reading_in`  | `nullable integer` |                                                        |
| `odometer_reading_out` | `nullable integer` |                                                        |

</article>
</details>

<details>
<summary>Flight Object</summary>
<article>

### Flight

> [!NOTE]
> The specific schema will be described in a future update.

</article>
</details>

<details>
<summary>Location Object</summary>
<article>

### Location

Brick-and-mortar location for in-person purchases.

| Field      | Type     | Description               |
| ---------- | -------- | ------------------------- |
| `location` | `object` | A [place](#place) object. |

</article>
</details>

<details>
<summary>Lodging Object</summary>
<article>

### Lodging

> [!NOTE]
> The specific schema will be described in a future update.

</article>
</details>

<details>
<summary>Transit Route Object</summary>
<article>

### Transit Route

A route, typically used by rideshare / taxi services.

```JSON
"transit_route": {
  "departure_address": {
    "street_address": "273 Sesame St",
    "city": "Brooklyn",
    "region": "NY",
    "country": "US",
    "postal_code": "11205",
    "lat": 40.68266,
    "lon": -73.94237,
  },
  "arrival_address": {
    "street_address": "141 Broadway",
    "city": "Brooklyn",
    "region": "NY",
    "country": "US",
    "postal_code": "11205",
    "lat": 40.69954,
    "lon": -73.97064,
  },
  "departure_time": 1713196492,
  "arrival_time": 1713197752,
  "polyline": "syhwFxzhbMrFtdAmpAhOlGzmAi%5CdEaGEDgEoAEMfK",
},
```

| Field               | Type              | Description                                                                                                       |
| ------------------- | ----------------- | ----------------------------------------------------------------------------------------------------------------- |
| `departure_address` | `object`          | The origin [address](#address) object.                                                                            |
| `arrival_address`   | `object`          | The destination [address](#address) object.                                                                       |
| `departure_time`    | `integer`         | Departure time. Measured in seconds since the Unix epoch.                                                         |
| `arrival_time`      | `integer`         | Arrival time. Measured in seconds since the Unix epoch.                                                           |
| `polyline`          | `nullable object` | An [encoded polyline](https://developers.google.com/maps/documentation/utilities/polylinealgorithm) of the route. |

</article>
</details>

<details>
<summary>Subscription Object</summary>
<article>

### Subscription

For SaaS bills, phone bills, etc.

```JSON
"subscription": {
  "interval": "month",
  "interval_count": 1,
  "current_period_start": 1679609767,
  "current_period_end": 1682288167
}
```

| Field                  | Type      | Description                                                                                                                                                         |
| ---------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `interval`             | `enum`    | On of `day`, `week`, `month` or `year`                                                                                                                              |
| `interval_count`       | `integer` | The number of intervals (specified in the interval attribute) between subscription billings. For example, interval=month and interval_count=3 bills every 3 months. |
| `current_period_start` | `integer` | Start of the current period of the subscription. Measured in seconds since the Unix epoch.                                                                          |
| `current_period_end`   | `integer` | End of the current period.                                                                                                                                          |

</article>
</details>

<details>
<summary>Shipment Object</summary>
<article>

### Shipment

> [!NOTE]
> The specific schema will be described in a future update.

</article>
</details>

## Line Items

Line items describe the goods and services that make up the purchase. The sum of the line item totals equal the `subtotal` value in the receipt header.

`line_items` is an array of `line_item` objects:

```json
"line_items": [
  {
    "quantity": 10,
    "description": "Blue Cheese Crumbles",
    "unit_cost": 178,
    "tax": 100,
    "total": 1780,
    "metadata": [{ "key": "SKU", "value": "524959" }],
    "product_image": "",
    "group": "Dairy"
  },
  {
    "quantity": 3,
    "description": "Vinegar Sherry Wine Spain",
    "unit_cost": 267,
    "tax": 100,
    "total": 801,
    "metadata": [{ "key": "SKU", "value": "941157" }],
    "product_image": "",
    "group": "Canned & Dry"
  }
]
```

| Field           | Type               | Description                                                                                                    |
| --------------- | ------------------ | -------------------------------------------------------------------------------------------------------------- |
| `description`   | `string`           | Description of the good / service.                                                                             |
| `total`         | `integer`          | Total for the line item (typically `quantity` × `unit_cost` + `tax`).                                          |
| `quantity`      | `nullable float`   | Quantity of items.                                                                                             |
| `unit_cost`     | `nullable integer` | Cost of the good / service in the [smallest currency unit](/definitions#currencies).                           |
| `unit`          | `nullable string`  | Optional field describing the unit type, typically for weight or volume -based values, e.g. 'kg' or 'gallons'. |
| `tax`           | `nullable integer` | Tax for the line item (defaults to 0).                                                                         |
| `metadata`      | `nullable array`   | Array of key/value [metadata pairs](#metadata).                                                                |
| `product_image` | `nullable string`  | Product image url, square aspect ratio.                                                                        |
| `group`         | `nullable string`  | Optional grouping of line items.                                                                               |

<details>
<summary>Metadata Object</summary>
<article>

### Metadata

Line item metadata consists of key/value pairs. This can be used to track things like SKU, Size, Color, UNSPSC Code, etc.

| Field   | Type     | Description                                    |
| ------- | -------- | ---------------------------------------------- |
| `key`   | `string` | The type of metadata, e.g. 'SKU', 'Size', etc. |
| `value` | `string` | The corresponding value.                       |

</article>
</details>

## Roll-up

The Roll-up block includes taxes, fees, tip, and discounts, culminating in the grand total.

> [!NOTE]
> The specific schema will be described in a future update.

## Actions

Merchants have the option to provide useful next actions in the Actions section. An action is typically a deep link to a page within the merchant’s website. For example 'Buy Again' might deep link to a pre-filled shopping cart. There is a limit of three actions per receipt.

```JSON
"actions": [
  {
    "description": "Emergency Roadside Assistance",
    "url": "https://yourco.com/support/be1e1b57-8fe9-4729-8b7d-f9a4690bb2cd",
  },
  {
    "description": "Rebook",
    "url": "https://yourco.com/buy/ad058b82-d0dd-4534-a915-d448df098167",
    "icon": "rebuy"
  }
]
```

| Field         | Type              | Description                                                                                 |
| ------------- | ----------------- | ------------------------------------------------------------------------------------------- |
| `description` | `string`          | Label that appears on the button.                                                           |
| `url`         | `string`          | Action deep link.                                                                           |
| `icon`        | `nullable string` | For certain action types, a supporting icon. Currently, the only supported icon is `rebuy`. |

## Payment

> [!NOTE]
> The payment details will be described in a future update.

## Primitives

Foundational objects used in a variety of locations within the receipt schema.

<details>
<summary>Merchant Primitive</summary>
<article>

### Merchant

A merchant profile.

> [!TIP]
> The merchant object is used to describe both a sending merchant and a third party merchant. In the former case, the merchant object is expanded implicitly via the Versa Registry, whereas in the latter case, the merchant object is explicitly encoded into the receipt, via the header `third_party` object.

```JSON
"merchant": {
  "id": "merchant_113fd137-3f9f-40fc-b60d-a8a30a415d9e",
  "name": "Platform Co.",
  "brand_color": "f0C14B",
  "logo": "https://static.platform.co/image_url.png",
  "website": "platform.co"
}
```

| Field         | Type              | Description                                                        |
| ------------- | ----------------- | ------------------------------------------------------------------ |
| `id`          | `string`          | Unique identifier for the merchant.                                |
| `name`        | `string`          | Merchant name.                                                     |
| `brand_color` | `nullable string` | Hex color.                                                         |
| `logo`        | `nullable string` | Logo image url, in a square aspect ratio. Recommmend size 400x400. |
| `website`     | `nullable string` | Merchant’s primary website url.                                    |

</article>
</details>

<details>
<summary>Place Primitive</summary>
<article>

### Place

Describes a brick-and-mortar location.

| Field             | Type              | Description                                                                                                                     |
| ----------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| `name`            | `nullable string` | Place name.                                                                                                                     |
| `address`         | `nullable object` | An [address](#address) object.                                                                                                  |
| `phone`           | `nullable string` |                                                                                                                                 |
| `url`             | `nullable string` | URL for specific place, e.g. chain.com/store-id.                                                                                |
| `google_place_id` | `nullable string` | Optional mapping to the [Google Places database](https://developers.google.com/maps/documentation/places/web-service/place-id). |

</article>
</details>

<details>
<summary>Address Primitive</summary>
<article>

### Address

| Field            | Type              | Description                       |
| ---------------- | ----------------- | --------------------------------- |
| `street_address` | `nullable string` |                                   |
| `city`           | `nullable string` |                                   |
| `region`         | `nullable string` | Two letter region code.           |
| `country`        | `string`          | Two letter ISO 3166 country code. |
| `postal_code`    | `nullable string` |                                   |
| `lat`            | `nullable int`    |                                   |
| `lon`            | `nullable int`    |                                   |

</article>
</details>

## Definitions & Formatting

### Currency Values

All API requests expect amounts to be provided in a currency’s smallest unit. For example, to represent 10 USD, provide an amount value of 1000 (that is, 1000 cents). For zero-decimal currencies, still provide amounts as an integer but without multiplying by 100. For example, to represent ¥500, provide an amount value of 500.

### Images

Images must be hosted at public URLs. The images are likely to be indexed by the receiver. For best results, no image dimension should be less than 400px, or greater than 2,000px.
