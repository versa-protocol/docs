---
title: "Receipt Object"
---

# Receipt Object

Itemized receipts are the core data model of Versa. They include both “header” information — the merchant name, merchant logo, total purchase amount, purchase date, etc. — as well as “line item” details — the quanitity, description, and cost of each item purchased.

Versa receipts are composed of six sections:

1. **Header**: Top-level fields, e.g. receipt total, purchase date.
2. **Type Block**: Type-specific objects describing the purchased goods and service. E.g. check-in and check-out information for a hotel stay, route and ticket information for a flight. Note: this section is only present for special receipt types, and is otherwise null.
3. **Line Items**: Description, quantity, unit cost, and total for each line item.
4. **Roll-up**: Subtotal, taxes, fees, tip, discounts, and grand total of the receipt.
5. **Actions**: Merchant-defined links, pivoting off the purchase. For example: ‘Contact Support,’ ‘Buy Again,’ ‘Manage Subscription.’
6. **Payment**: Payment status associated with the receipt.

## Wrapper

A Versa receipt is wrapped in an object that includes the sender reference and schema version. The sender profile will be expanded by the receiver when they decrypt the object; this ensures that the receiver has a consistent, up-to-date profile for the sending merchant. The overall Versa receipt structure looks like this:

```json
{
  "sender_id": "merchant_113fd137-3f9f-40fc-b60d-a8a30a415d9e",
  "schema_version": 1,
  "header": { ... },
  "type_block": { ... },
  "roll_up": { ... },
  "actions": { ... },
  "payment": { ... }
}
```

| Field            | Type      | Description                                                       |
| ---------------- | --------- | ----------------------------------------------------------------- |
| `sender_id`      | `string`  | Unique merchant identifier for the sender.                        |
| `schema_version` | `integer` | Version of the receipt schema; useful for validating the receipt. |

After these two wrapper fields, `sender_id` and `schema_version`, the receipt is composed of the six objects outlined above: `header`, `type_block`, `roll_up`, `actions`, and `payment`. Below we cover each of these six sections in detail.

## Header

An example receipt header:

```json
"header": {
  "receipt_id": "7b928a1d-eb2b-406f-bed3-74ba7dacbe98",
  "currency": "USD",
  "amount": 6332,
  "subtotal": 5928,
  "date_time": 1713295619,
  "mcc": 234,
  "third_party": {
    "first_party_relation": "point_of_sale",
    "make_primary": true,
    "merchant": {
      "id": "merchant_5e2a9954-b7e3-4150-bd51-ba2d3d12442b",
      "name": "Widget Co.",
      "brand_color": "EF4D48",
      "logo": "https://static.platform.co/merchants/widget-co.png",
      "website": ""
    }
  }
}
```

| Field         | Type               | Description                                                                                                         |
| ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------- |
| `receipt_id`  | `string`           | Unique identifier for the receipt.                                                                                  |
| `currency`    | `string`           | An [ISO 4217](https://www.iso.org/iso-4217-currency-codes.html) currency code, e.g. `USD`.                          |
| `amount`      | `integer`          | Receipt total amount. This amount is in the receipt currency and in the [smallest currency unit](#currency-values). |
| `subtotal`    | `integer`          | Receipt subtotal (before taxes, fees, and tip).                                                                     |
| `date_time`   | `integer`          | Time at which the object was created. Measured in seconds since the Unix epoch.                                     |
| `mcc`         | `nullable integer` | Merchant Category Code. This value should match the value on the card network.                                      |
| `third_party` | `nullable object`  | [Third party](#third-party-object) involved in the transaction, where applicable.                                   |

### Third Party Object

The third party object is used when the sending merchant is a platform. For example, if a coffee shop uses Square to process sales, the sending merchant would be Square and the third party merchant would be the coffee shop. The `make_primary` flag specifies whether the sending merchant or the third party merchant should get top billing on the receipt.

| Field                  | Type      | Description                                                                                    |
| ---------------------- | --------- | ---------------------------------------------------------------------------------------------- |
| `first_party_relation` | `string`  | One of `bnpl` `delivery_service` `marketplace` `payment_processor` `platform` `point_of_sale`. |
| `make_primary`         | `boolean` | Determines whether the merchant or third party gets top billing on the receipt.                |
| `merchant`             | `string`  | A [merchant](#merchant-object) object representing the third party.                            |

### Merchant Object

The merchant object is used to describe both a sending merchant and a third party merchant. However in the former case, the merchant object is expanded implicity via the Versa Registry, whereas in the latter case, the merchant object is explicitly encoded into the receipt, within the header third_party object.

```JSON
"merchant": {
  "id": "merchant_113fd137-3f9f-40fc-b60d-a8a30a415d9e",
  "name": "Platform Co.",
  "brand_color": "f0C14B",
  "logo": "https://static.platform.co/image_url.png",
  "website": "platform.co"
}
```

| Field         | Type              | Description                                                        |
| ------------- | ----------------- | ------------------------------------------------------------------ |
| `id`          | `string`          | Unique identifier for the merchant.                                |
| `name`        | `string`          | Merchant name.                                                     |
| `brand_color` | `nullable string` | Hex color.                                                         |
| `logo`        | `nullable string` | Logo image url, in a square aspect ratio. Recommmend size 400x400. |
| `website`     | `nullable string` | Merchant’s primary website url.                                    |

## Type Block

The Type Blocks section consists of a series of templates specific to different receipt types.

Versa covers the following types: `shipment`, `flight`, `route`, `location`, `subscription`, `car_rental`, `lodging`.

A receipt may have zero, one, or multipe type blocks. For instance, a delivery from Home Depot would have a `shipment` type block and a `location` type block.

We will specificy the schema for each type block in a future update.

## Line Items

Line items describe the goods and services that make up the purchase. The sum of the line item totals equal the `subtotal` value in the receipt header.

`line_items` is an array of `line_item` objects:

```json
{
  ...
  "line_items": [
    {
      "quantity": 10,
      "description": "Blue Cheese Crumbles",
      "unit_cost": 178,
      "tax": 100,
      "total": 1780,
      "metadata": [{ "key": "SKU", "value": "524959" }],
      "product_image": "",
      "group": "Dairy"
    },
    {
      "quantity": 3,
      "description": "Vinegar Sherry Wine Spain",
      "unit_cost": 267,
      "tax": 100,
      "total": 801,
      "metadata": [{ "key": "SKU", "value": "941157" }],
      "product_image": "",
      "group": "Canned & Dry"
    }
  ]
  ...
}
```

| Field           | Type               | Description                                                                                                    |
| --------------- | ------------------ | -------------------------------------------------------------------------------------------------------------- |
| `description`   | `string`           | Description of the good / service.                                                                             |
| `total`         | `integer`          | Total for the line item (typically `quantity` x `unit_cost` + `tax`).                                          |
| `quantity`      | `nullable float`   | Quantity of items.                                                                                             |
| `unit_cost`     | `nullable integer` | Cost of the good / service in the [smallest currency unit](/definitions#currencies).                           |
| `unit`          | `nullable string`  | Optional field describing the unit type, typically for weight or volume -based values, e.g. 'kg' or 'gallons'. |
| `tax`           | `nullable integer` | Tax for the line item (defaults to 0).                                                                         |
| `metadata`      | `nullable array`   | Array of key/value [metadata pairs](#line-item-metadata).                                                      |
| `product_image` | `nullable string`  | Product image url, square aspect ratio.                                                                        |
| `group`         | `nullable string`  | Optional grouping of line items.                                                                               |

### Line Item Metadata

Line item metadata consists of key/value pairs. This can be used to track things like SKU, Size, Color, UNSPSC Code, etc.

| Field   | Type     | Description                                    |
| ------- | -------- | ---------------------------------------------- |
| `key`   | `string` | The type of metadata, e.g. 'SKU', 'Size', etc. |
| `value` | `string` | The corresponding value.                       |

## Roll-up

The Roll-up block includes taxes, fees, tip, and discounts, culminating in the grand total. The specific schema will be described in a future update.

## Actions

Provide useful next actions in the Actions section. An action is typically a deep link to a useful part of ther merchant’s website. Three actions maximum.

```JSON
{
  ...
  "actions": [
    {
      "description": "Emergency Roadside Assistance",
      "url": "https://yourco.com/support/be1e1b57-8fe9-4729-8b7d-f9a4690bb2cd",
    },
    {
      "description": "Rebook",
      "url": "https://yourco.com/buy/ad058b82-d0dd-4534-a915-d448df098167",
      "icon": "rebuy"
    }
  ],
  ...
}
```

| Field         | Type              | Description                                                                                 |
| ------------- | ----------------- | ------------------------------------------------------------------------------------------- |
| `description` | `string`          | Label that appears on the button.                                                           |
| `url`         | `string`          | Action deep link.                                                                           |
| `icon`        | `nullable string` | For certain action types, a supporting icon. Currently, the only supported icon is `rebuy`. |

## Payment

The payment details will be described in a future update.

## Definitions & Formatting

### Currency Values

All API requests expect amounts to be provided in a currency’s smallest unit. For example, to represent 10 USD, provide an amount value of 1000 (that is, 1000 cents). For zero-decimal currencies, still provide amounts as an integer but without multiplying by 100. For example, to represent ¥500, provide an amount value of 500.

### Images

Images must be hosted at public URLs. The images are likely to be indexed by the receiver. For best results, no image dimension should be less than 400px, or greater than 2,000px.
